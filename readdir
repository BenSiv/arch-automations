#!/bin/lua

lfs = require("lfs")

local function get_content(directory)
	local files = {}
	local dirs = {}
    for file in lfs.dir(directory) do
        if file ~= "." and file ~= ".." then
            local mode = lfs.attributes(file, "mode")
            if mode == "file" then
            	table.insert(files, file)
            else
            	table.insert(dirs, file)
            end
        end
    end
    table.sort(files)
    table.sort(dirs)
    local content = {files = files, dirs = dirs}
    return content
end

local function main()
	-- ANSI escape codes for colors
	local colors = {
		default = "\27[0m",
		blue = "\27[01;34m"
	}
	
	if arg[1] then 
		content = get_content(directory)
	else
		content = get_content(".")
	end
	
	for key, dir in pairs(content["dirs"]) do
		print(colors.blue .. dir .. colors.default)
	end
    
    for key, file in pairs(content["files"]) do
		print(colors.default .. file .. colors.default)
	end
	
end

main()


